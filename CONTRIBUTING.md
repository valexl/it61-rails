# Contribution Guide

Есть 2 способа развернуть и запустить проект:

- установить Ruby, Postgres локально и следовать инструкциям в [README.md](https://github.com/IT61/it61-rails/blob/master/README.md)
- установить Vagrant и развернуть окружение разработки через него (предпочтительный путь)

# Создание среды разработки при помощи Vagrant
Vagrant - это инструмент создания и конфигурирования виртуальной среды разработки. Является обёрткой для программного обеспечения виртуализации, например VirtualBox.

**Инструкция:**
- [для Windows](#windows-setup)
- TODO для Unix
- TODO для OS X (nfx под VBox работает только с Host Network)

<a name="windows-setup" />
## Windows ##

- устанавливаем [Vagrant](https://www.vagrantup.com)
- устанавливаем [MSysGit](https://git-for-windows.github.io) [(*)](#first)
- запускаем Git Bash (это адаптированный BASH shell для Windows)
- переходим в директорию с локальной копией проекта. Для смены диска используйте следующий синтаксис: `cd /БУКВА_ДИСКА/`
- командуем Vagrant провести первоначальную настройку виртуальной машины - `vagrant up`
- и финальная стадия - инициализация и настройка проекта - `vagrant provision`
- если все прошло успешно, то вы должны увидеть следующие строчки:

```
==> default: [2015-12-08 15:49:06] INFO  WEBrick 1.3.1
==> default: [2015-12-08 15:49:06] INFO  ruby 2.2.3 (2015-08-18) [x86_64-linux-gnu]
==> default: [2015-12-08 15:49:06] INFO  WEBrick::HTTPServer#start: pid=1589 port=3000
```

- у вас будет настроенное и запущенное приложение по адресу `localhost:3000`. В Vagrantfile уже настроена синхронизация между локальной копией проекта и копией виртуальной машине, т.е. все локальные изменения автоматически передаются в виртуальную машину.

Чтобы остановить/выключить машину, нужно выполнить следующую команду - `vagrant suspend`.
Для повторного запуска машины (допустим после перезагрузки вашей машины) нужно:
- запустить Git bash
- перейти в директорию с локальной копией проекта
- запустить Vagrant: `vagrant up`
- запустить приложение: `vagrant ssh -- -t 'cd /app && bundle exec rails s; /bin/bash'`

**ВАЖНО:** Чтобы Vagrant понимал для какой машины нужно выполнять команды, вы должны быть в директории с файлом `Vagrantfile`. В нашем случае это корневая директория проекта.

*Примечания:*

<a name="first"></a>
**[1]** MSysGit нужен для SSH, чтобы vagrant смог подключиться к виртуальной машине и выполнить команды. Особо упоротые клиенты могут использовать [нативный SSH клиент под Windows](https://github.com/PowerShell/Win32-OpenSSH)
